package songlib;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridLayout;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

public class SongFrame extends JFrame {
	
	private static final long serialVersionUID = 1;
	
	public SongFrame(SongListModel model) {
		JPanel centerPanel = new JPanel(new GridLayout(1, 2));
		JList<Song> list = new JList<Song>(model);
		JScrollPane scroll = new JScrollPane(list);
		list.setPreferredSize(new Dimension(200, 200));
		centerPanel.add(scroll);
		centerPanel.add(new JPanel());
		
		JPanel northPanel = new JPanel(new GridLayout(4, 1));
		northPanel.setPreferredSize(new Dimension(200, 30));
		northPanel.add(new JButton());
		
		add(centerPanel, BorderLayout.CENTER);
		add(northPanel, BorderLayout.NORTH);
		
		list.addListSelectionListener(new ListSelectionListener() {
			int previousIndex = -1;
			
			public void valueChanged(ListSelectionEvent e) {
				Object changed = e.getSource();
				if (changed instanceof JList<?> && !e.getValueIsAdjusting()) {
					@SuppressWarnings("unchecked")
					JList<Song> list = (JList<Song>) changed;
					int index;
					if (previousIndex == e.getFirstIndex()) {
						index = e.getLastIndex();
					} else {
						index = e.getFirstIndex();
					}
					previousIndex = index;
					Song song = list.getModel().getElementAt(index);
					centerPanel.remove(centerPanel.getComponent(1));
					JPanel details = new JPanel(new GridLayout(4, 1));
					JLabel name = new JLabel("Name: " + song.getName());
					JLabel artist = new JLabel("Artist: " + song.getArtist());
					JLabel album = new JLabel("Album: " + song.getAlbum());
					JLabel year = new JLabel("Year: " + song.getYear());
					details.add(name);
					details.add(artist);
					details.add(album);
					details.add(year);
					centerPanel.add(details);
					pack();
				}
			}
			
		});
		
		pack();
		setLocationRelativeTo(null);
		list.setSelectedIndex(0);
	}

}
