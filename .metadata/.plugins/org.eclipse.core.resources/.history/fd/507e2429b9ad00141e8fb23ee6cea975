package songlib;

import java.awt.Component;
import java.awt.Dimension;
import java.awt.GridLayout;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

public class SongFrame extends JFrame {
	
	private static final long serialVersionUID = 1;
	
	public SongFrame(SongListModel model) {
		setLayout(new GridLayout(1, 2));
		SongFrame that = this;
		JList<Song> list = new JList<Song>(model);
		list.setPreferredSize(new Dimension(200, 200));
		list.addListSelectionListener(new ListSelectionListener() {
			public void valueChanged(ListSelectionEvent e) {
				Object changed = e.getSource();
				if (changed instanceof JList<?>) {
					JList<Song> list = (JList<Song>) changed;
					Song song = list.getModel().getElementAt(e.getFirstIndex());
					Component[] views = that.getContentPane().getComponents();
					that.remove(views[views.length - 1]);
					JPanel details = new JPanel(new GridLayout(4, 1));
					JLabel name = new JLabel(song.getName());
					JLabel artist = new JLabel(song.getArtist());
					JLabel album = new JLabel(song.getAlbum());
					JLabel year = new JLabel(song.getYear());
					details.add(name);
					details.add(artist);
					details.add(album);
					details.add(year);
					that.add(details);
				}
			}
		});
		
		JScrollPane scroll = new JScrollPane(list);
		add(scroll);

		JPanel details = new JPanel(new GridLayout(4, 1));
		add(new JPanel());
		pack();
		setLocationRelativeTo(null);
		list.setSelectedIndex(0);
	}

}
